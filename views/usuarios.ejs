<!DOCTYPE html>
<head>
  <title> Usuarios </title>
  <link rel="stylesheet" href="/css/output.css" />

  <style> 

    body {
      background-color: #E4E8EE;
    }

    #container {
      position: relative;
      height:500px;
      box-shadow: 1px 4px 8px rgba(36, 37, 42, 0.2);
    }
    #containerElements {
      overflow-y: auto; 
      height:100%;
    }
    #element {
      position: relative;
    }
    #main-content {
      transition: padding-left 0.3s ease;
      padding-left: 3.5rem;
    } 
    .side:hover ~ #main-content {
      padding-left: 10rem;
    }

  </style>

</head>
<body class="bg-[#E4E8EE]">
    <%- include('partials/sidebar.ejs') %> 

    <div id="main-content" class="ml-14 mt-14 pl-8">
      <h1 class="mb-16 text-4xl text-gray-900"> Usuarios </h1>

      <div id="container" class="relative overflow-auto sm:rounded-lg w-3/4">
            <table class="text-sm text-left rtl:text-right text-gray-500 border-collapse rounded-lg w-full">
              <thead class="text-xs text-white bg-gray-50">
                <tr>
                  <th scope="col" class="px-6 py-3 bg-blue-700"> Nombre completo </th>
                  <th scope="col" class="px-6 py-3 bg-blue-700"> Correo </th>
                  <th scope="col" class="px-6 py-3 bg-blue-700"> Teléfono </th>
                  <th scope="col" class="px-6 py-3 bg-blue-700"> Domicilio </th>
                  <th scope="col" class="px-6 py-3 bg-blue-700"> Rol </th>
                  <th scope="col" class="px-6 py-3 bg-blue-700">  </th>
                </tr>
              </thead>

              <tbody>
                <% i = 0 %>
                <% usuarios.forEach((usuario) => { %>
                  <tr class="bg-white border-b hover:bg-gray-50">
                    <td class="px-4 py-2 sm:px-3 sm:py-3">
                      <span class="cursor-pointer relative" 
                            onmouseover="document.getElementById('popover0_<%= usuario.IDUsuario %>').classList.remove('hidden')"
                            onmouseout="document.getElementById('popover0_<%= usuario.IDUsuario %>').classList.add('hidden')"
                      >
                        <%= (usuario.Nombre + ' ' + usuario.ApellidoPaterno + ' ' + usuario.ApellidoMaterno).substr(0, 15) + ((usuario.Nombre + ' ' + usuario.ApellidoPaterno + ' ' + usuario.ApellidoMaterno).length > 15 ? '...' : '') %>
                        <div id="popover0_<%= usuario.IDUsuario %>" class="hidden absolute bg-white border border-gray-300 shadow-lg p-2 z-10 -ml-5 top-8">
                          <%= usuario.Nombre %> <%= usuario.ApellidoPaterno %> <%= usuario.ApellidoMaterno %>
                        </div>
                      </span>  
                    </td>
                    <td class="px-4 py-2 sm:px-3 sm:py-3">
                      <!-- Mostrar solo el inicio del correo -->
                      <span class="cursor-pointer relative" 
                            onmouseover="document.getElementById('popover_<%= usuario.IDUsuario %>').classList.remove('hidden')"
                            onmouseout="document.getElementById('popover_<%= usuario.IDUsuario %>').classList.add('hidden')"
                      >
                        <%= usuario.Correo.substr(0, 20) + (usuario.Correo.length > 20 ? '...' : '') %>
                        <div id="popover_<%= usuario.IDUsuario %>" class="hidden absolute bg-white border border-gray-300 shadow-lg p-2 z-10 -ml-10 top-8">
                          <%= usuario.Correo %>
                        </div>
                      </span>
                    </td>
                    <td class="px-4 py-2 sm:px-3 sm:py-3">
                      <!-- Mostrar solo el inicio del teléfono -->
                      <span class="cursor-pointer relative" 
                            onmouseover="document.getElementById('popover2_<%= usuario.IDUsuario %>').classList.remove('hidden')"
                            onmouseout="document.getElementById('popover2_<%= usuario.IDUsuario %>').classList.add('hidden')"
                      >
                        <%= usuario.Telefono.substr(0, 20) + (usuario.Telefono.length > 20 ? '...' : '') %>
                        <div id="popover2_<%= usuario.IDUsuario %>" class="hidden absolute bg-white border border-gray-300 shadow-lg p-2 z-10 -ml-10 top-8">
                          <%= usuario.Telefono %>
                        </div>
                      </span>
                    </td>
                    <td class="px-4 py-2 sm:px-3 sm:py-3">
                    <!-- Mostrar solo el inicio del domicilio -->
                    <span class="cursor-pointer relative" 
                    onmouseover="document.getElementById('popover3_<%= usuario.IDUsuario %>').classList.remove('hidden')"
                    onmouseout="document.getElementById('popover3_<%= usuario.IDUsuario %>').classList.add('hidden')"
                      >
                        <%= usuario.Domicilio.substr(0, 20) + (usuario.Domicilio.length > 20 ? '...' : '') %>
                        <div id="popover3_<%= usuario.IDUsuario %>" class="hidden absolute bg-white border border-gray-300 shadow-lg p-2 z-10 -ml-10 top-8">
                          <%= usuario.Domicilio %>
                        </div>
                      </span>
                    </td>
                    <td class="px-4 py-2 sm:px-3 sm:py-3">
                        <%= roles[i].Nombre %> 
                    </td>
                    <td class="px-4 py-2 sm:px-3 sm:py-3"> 
                        
                    </td>

                        <% i = i + 1 %>
                  </tr>
                      <% }); %>

              </tbody>
            </table>
        </div>
    </div>

  </body>
